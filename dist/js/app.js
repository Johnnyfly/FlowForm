!function(n){var a={};function i(t){if(a[t])return a[t].exports;var e=a[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,i),e.l=!0,e.exports}i.m=n,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="./dist",i(i.s=4)}([function(t,e,n){"use strict";var a;Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(8)),r=o(n(15));function o(t){return t&&t.__esModule?t:{default:t}}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s={Base:"Base",MixControl:"MixControl",LayOut:"LayOut"},d=(l(a={ControlType:s},s.Base,{}),l(a,s.MixControl,{}),l(a,s.LayOut,{Table:i.default}),a);for(var f in d.AllControls={},s)for(var c in d[f])d.AllControls[c]=d[f][c];d.AllControls.TextInput=r.default,e.default=d},function(t,e,n){"use strict";var a,i,r;i=[t,e],void 0===(r="function"==typeof(a=function(t,e){var n,a,c="function"==typeof Map?new Map:(n=[],a=[],{has:function(t){return-1<n.indexOf(t)},get:function(t){return a[n.indexOf(t)]},set:function(t,e){-1===n.indexOf(t)&&(n.push(t),a.push(e))},delete:function(t){var e=n.indexOf(t);-1<e&&(n.splice(e,1),a.splice(e,1))}}),u=function(t){return new Event(t,{bubbles:!0})};try{new Event("test")}catch(t){u=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}function i(i){if(i&&i.nodeName&&"TEXTAREA"===i.nodeName&&!c.has(i)){var t,n=null,a=null,r=null,o=function(){i.clientWidth!==a&&f()},l=function(e){window.removeEventListener("resize",o,!1),i.removeEventListener("input",f,!1),i.removeEventListener("keyup",f,!1),i.removeEventListener("autosize:destroy",l,!1),i.removeEventListener("autosize:update",f,!1),Object.keys(e).forEach(function(t){i.style[t]=e[t]}),c.delete(i)}.bind(i,{height:i.style.height,resize:i.style.resize,overflowY:i.style.overflowY,overflowX:i.style.overflowX,wordWrap:i.style.wordWrap});i.addEventListener("autosize:destroy",l,!1),"onpropertychange"in i&&"oninput"in i&&i.addEventListener("keyup",f,!1),window.addEventListener("resize",o,!1),i.addEventListener("input",f,!1),i.addEventListener("autosize:update",f,!1),i.style.overflowX="hidden",i.style.wordWrap="break-word",c.set(i,{destroy:l,update:f}),"vertical"===(t=window.getComputedStyle(i,null)).resize?i.style.resize="none":"both"===t.resize&&(i.style.resize="horizontal"),n="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),isNaN(n)&&(n=0),f()}function s(t){var e=i.style.width;i.style.width="0px",i.offsetWidth,i.style.width=e,i.style.overflowY=t}function d(){if(0!==i.scrollHeight){var t=function(t){for(var e=[];t&&t.parentNode&&t.parentNode instanceof Element;)t.parentNode.scrollTop&&e.push({node:t.parentNode,scrollTop:t.parentNode.scrollTop}),t=t.parentNode;return e}(i),e=document.documentElement&&document.documentElement.scrollTop;i.style.minHeight="",i.style.minHeight=i.scrollHeight+n+"px",a=i.clientWidth,t.forEach(function(t){t.node.scrollTop=t.scrollTop}),e&&(document.documentElement.scrollTop=e)}}function f(){d();var t=Math.round(parseFloat(i.style.height)),e=window.getComputedStyle(i,null),n="content-box"===e.boxSizing?Math.round(parseFloat(e.height)):i.offsetHeight;if(n<t?"hidden"===e.overflowY&&(s("scroll"),d(),n="content-box"===e.boxSizing?Math.round(parseFloat(window.getComputedStyle(i,null).height)):i.offsetHeight):"hidden"!==e.overflowY&&(s("hidden"),d(),n="content-box"===e.boxSizing?Math.round(parseFloat(window.getComputedStyle(i,null).height)):i.offsetHeight),r!==n){r=n;var a=u("autosize:resized");try{i.dispatchEvent(a)}catch(t){}}}}function r(t){var e=c.get(t);e&&e.destroy()}function o(t){var e=c.get(t);e&&e.update()}var l=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((l=function(t){return t}).destroy=function(t){return t},l.update=function(t){return t}):((l=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],function(t){return i(t)}),t}).destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],r),t},l.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],o),t}),e.default=l,t.exports=e.default})?a.apply(e,i):a)||(t.exports=r)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={tb:'<div class="optItem"><span type="mergeCell" class="btnHandleTable btnNorMal">合并单元格</span><span type="splitCell" class="btnHandleTable btnNorMal">拆分单元格</span><span type="addRow" class="btnHandleTable addRow btnNorMal">添加行</span><span type="addColTable" class="btnHandleTable addCol btnNorMal">添加列</span><span type="delRow" class="btnHandleTable delRow btnNorMal show">删除行</span><span type="delColTable" class="btnHandleTable delColTable btnNorMal show">删除列</span></div>',tbCount:'<div class="optItem"><input class="txtShort txtRow" type="text"><span class="desc">行</span><span class="gap">×</span><input type="text" class="txtShort txtCol"><span class="desc">列</span><span type="tbSet" class="btnNorMal primary">确定</span></div>',border:'<div class="optItem"> <label class="attrLab"><input class="ckBorder" type="checkbox" />不显示线框</label></div>'}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(21);var a=i(n(0)),l=i(n(22));function i(t){return t&&t.__esModule?t:{default:t}}var r={init:function(t){var e=$('<div class="designProps"/>');e.append('<ul class="tabAttrs"><li class="item">控件设置</li></ul>'),e.append('<div class="setProps"></div>'),t.$el.append(e)},render:function(t){var e=t.type,r=t.$el.find(".setProps"),o=a.default.AllControls[e];if(o){var n=o.metaInfo.attrs;r.html(""),n&&0<n.length&&$.each(n,function(t,e){var n=$('<div class="attrItem" />');e.className&&n.addClass(e.className),e.title&&n.append('<div class="attrTitle">'+e.title+"</div>");var a=e.Options;for(var i in a)l.default[i]?n.append(l.default[i]):o.PropsHtmlDef[i]&&n.append(o.PropsHtmlDef[i]);r.append(n)})}}};e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(n(5));var i={init:function(t){a.Controls.render({$el:t}),a.DesignProps.init({$el:t}),a.FormDesign.init({$el:t})}};window.ZppFormApplicatin=i,e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DesignProps=e.FormDesign=e.Controls=void 0,n(6);var a=o(n(7)),i=o(n(23)),r=o(n(3));function o(t){return t&&t.__esModule?t:{default:t}}e.Controls=a.default,e.FormDesign=i.default,e.DesignProps=r.default},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d=a(n(0));n(17),n(18);var i=a(n(19));function a(t){return t&&t.__esModule?t:{default:t}}var r={render:function(t){var e={renderType:["Base","LayOut","MixControl"],showDefault:d.default.ControlType.LayOut,$el:$("body")},n=$.extend(e,t);this.renderTab(n);var a=n.$el;n.$desiEl&&(a=n.$desiEl),i.default.init(a)},renderTab:function(t){var e=t.renderType,n=$('<div class="allControls"/>');if(e&&1<e.length){var a=$('<ul class="tabControl" />'),i=d.default.ControlType;-1<e.indexOf(i.Base)&&(a.append('<li type="'+i.Base+'" class="item ThemeBorderColorLightSelected">控件</li>'),n.append(this.renderControl(i.Base,t.$el))),-1<e.indexOf(i.MixControl)&&(a.append('<li type="'+i.MixControl+'" class="item ThemeBorderColorLightSelected">套件</li>'),n.append(this.renderControl(i.MixControl,t.$el))),-1<e.indexOf(i.LayOut)&&(a.append('<li type="'+i.LayOut+'" class="item ThemeBorderColorLightSelected">布局</li>'),n.append(this.renderControl(i.LayOut,t.$el)))}n.prepend(a),t.$el.append(n);var r=t.$el.find("."+t.showDefault+"ControlBox");r.length<=0?t.$el.find(".ControlBox:first").show():r.show();var o=t.$el.find(".tabControl .item[type='"+t.showDefault+"']");0<o.length?o.addClass("selected"):t.$el.find(".tabControl .item:first").addClass("selected")},renderControl:function(t,l){var e=d.default[t],n=t+"ControlBox",s=$('<div class="ControlBox" />');return s.addClass(n),$.each(e,function(t,e){var n=$('<div class="cItem ThemeBgCoolHover ThemeBorderColorLightHover" />'),a=$('<span class="text"/>'),i=$('<i class="iconComm zppiconfont"/>'),r=e.metaInfo.title||"拖拽至页面中间",o=e.metaInfo.iconClass||"iconNull";n.attr("type",e.metaInfo.type),n.attr("title",r),a.text(e.metaInfo.name),i.addClass(o),n.append(a),n.append(i),s.append(n),e.initEvent&&e.initEvent(l)}),s}};e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(9);var l=r(n(0)),a=r(n(1)),i=r(n(10));function r(t){return t&&t.__esModule?t:{default:t}}var o={defaultData:function(){for(var t=[],e=0;e<3;e++){for(var n=[],a=0;a<3;a++)n.push({childrens:[]});t.push({cells:n})}return{type:"Table",id:"Table_"+ +new Date,Settings:{},layOutData:{data:t}}},metaInfo:{type:"Table",name:"布局表格",iconClass:"zppicon-biaoge",title:"用于页面布局，允许合并单元格",attrs:[{className:"setRowCol",title:"行列数",Options:{tbCount:!0,tb:!0}},{title:"其他设置",Options:{border:!0}}]},methods:{render:function(t){t||(t=Object.create(o.defaultData()));var e=$('<div class="fieldItem" /> ');return this.renderCell(e,t),(0,a.default)(e.find(".txtInput")),e},renderCell:function(t,e){var n=$('<table class="tbLayout" />');if(n.attr("id",e.id),e.layOutData&&e.layOutData.data){var a=e.layOutData.data;$.each(a,function(t,e){var o=$("<tr/>");$.each(e.cells,function(t,e){var a=$("<td/>"),n=e.Settings,i=e.childrens;if(n&&(n.rowSpan&&a.attr("rowspan",n.rowSpan),n.colSpan&&a.attr("colspan",n.colSpan)),i&&0<i.length)$.each(i,function(t,e){if(l.default.AllControls[e.type]){var n=l.default.AllControls[e.type].render(e);a.append(n)}});else if(l.default.AllControls.TextInput){var r=l.default.AllControls.TextInput.render();a.append(r)}o.append(a)}),n.append(o)})}t.append(n)},parse:function(){},bindPropsEvents:function(t){}},initEvent:function(t){i.default.init(t)},render:function(t){return o.methods.render(t)},PropsHtmlDef:r(n(2)).default};e.default=o},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o(n(11)),i=o(n(12)),r=o(n(14));function o(t){return t&&t.__esModule?t:{default:t}}var l={init:function(t){a.default.init(t),i.default.init(t),r.default.init(t)}};e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={init:function(t){t.on("mousedown","td",function(t){if(0==t.button){var e=$(this).closest(".fieldItem");$(".fieldItem").removeClass("selected"),e.addClass("selected"),$(".fieldItem").find("textarea").blur(),a.bindSelectionTdEvent({initX:t.pageX,initY:t.pageY,$table:$(this).closest(".tbLayout")})}}),$("body").on("click",function(){t.find(".active").removeClass("active")})},bindSelectionTdEvent:function(o){$("body").addClass("noSelected");var l=this,s=!1;$(window).on("mousemove.selectionTd",function(t){var e=t.pageX,n=t.pageY,a=e-o.initX,i=n-o.initY,r={width:a,height:i,left:o.initX,top:o.initY};return o.initX==e&&o.initY==n||($("#selectionBox").length<=0&&($("body").append("<div id='selectionBox'></div>"),s=$("#selectionBox")),a<0&&(r.left=o.initX+a,a=Math.abs(a),r.width=a),i<0&&(r.top=o.initY+i,i=Math.abs(i),r.height=i),s.css(r),l.diffSelectionTd(r,o.$table)),!1}),$(window).on("mouseup.selectionTd",function(){$(window).off("mousemove.selectionTd"),$(window).off("mouseup.selectionTd"),s&&s.remove(),$("body").removeClass("noSelected")})},diffSelectionTd:function(s,d){var f=this;d.find("td").each(function(){var t=$(this),e=t.offset().left,n=t.offset().top,a=t.width(),i=t.height();if(!(e<s.left&&e+a>s.left||e>s.left&&e<s.left+s.width))return t.removeClass("active"),!0;if(n<s.top&&n+i>s.top||n>s.top&&n<s.top+s.height){t.addClass("active");var r=!1;if(t.attr("colspan")){var o=e+a;o>s.left+s.width&&(s.width=o-s.left,r=!0),e<s.left&&(s.width=s.left+s.width-e-1,s.left=e-1,r=!0)}if(t.attr("rowspan")){var l=n+i;l>s.top+s.height&&(s.height=l-s.top,r=!0),n<s.top&&(s.height=s.top+s.height-n-1,s.top=n-1)}if(r)return f.diffSelectionTd(s,d),!1}else t.removeClass("active")})}};e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o(n(13)),i=o(n(0)),r=o(n(1));function o(t){return t&&t.__esModule?t:{default:t}}var l={init:function(a){var i=this;a.on("click",".btnHandleTable",function(){var t=$(this),e=t.attr("type"),n=a.find(".fieldItem.selected");0<n.length&&i.eventObj[e]&&i.eventObj[e](n,t)})},eventObj:{mergeCell:function(t,e){a.default.rowColSpan(t.find(".tbLayout"))},splitCell:function(e,t){e.find("td.active").each(function(){var t=$(this);(1<t.attr("rowspan")||1<t.attr("colspan"))&&a.default.splitCell(t),this.replaceContolToTextInput(e)})},addRow:function(t,e){var n=t.find(".active:last");0<n.length?a.default.insertTr(n.closest("tr")):a.default.insertToLast(t),this.replaceContolToTextInput(t)},addColTable:function(t,e){var n=t.find(".active:last");0<n.length&&0<n.next().length?a.default.insertTd(n):this.addCol(t)},addCol:function(t){if(t.find("table tr td:first").attr("width")){var e=0,n=t.width(),a=0;t.find("table tr:first td").each(function(){var t=$(this).attr("colspan");a+=$(this).width(),e+=t?parseInt(t):1});var i=Math.floor(n/(e+1));t.find("table tr td").each(function(){var t=$(this),e=parseInt(t.attr("width"));e=1<(e-=e/a*i)&&e||1,e=Math.floor(e),t.attr("width",e)}),t.find("table tr").each(function(t){var e=$("<td/>");e.attr("width",i),e.append('<div class="tdNull">&nbsp;</div>'),$(this).append(e)})}else t.find("table tr").each(function(t){var e=$("<td/>");e.append('<div class="tdNull">&nbsp;</div>'),$(this).append(e)});this.replaceContolToTextInput(t)},delColTable:function(t){if(t.find("tr:first td").length<=1)t.find(".btnDelField").click();else{var e=t.find(".active");e.length<=0&&(e=t.find("tr:first td:last")),e.each(function(){a.default.deleteTd($(this))})}},delRow:function(t){var e=t.find(".active");0<e.length?(0,e.parent().each(function(){a.default.deleteTr($(this).find("td:first"))})):a.default.deleteTr(t.find("tr:last td:first")),t.find("td").length<=0&&t.find(".btnDelField").trigger("click",{trigge:!0})},replaceContolToTextInput:function(t){var e=t.find(".tdNull").parent();e.each(function(){var t=i.default.AllControls.TextInput.render();$(this).html(t)}),(0,r.default)(e.find(".txtInput"))}}};e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={rowColSpan:function(t){if(!(t.find("td.active").length<=1)){var e=0,n=0,a=t.find("td.active:first").closest("tr"),i=t.find("td.active").closest("tr"),r=0;a.find("td.active").each(function(){var t=$(this).attr("colspan");e+=t?parseInt(t):1,$(this).attr("width")&&(r+=parseInt($(this).attr("width")))});var o=$("td.active:last").offset().top+$("td.active:last").height()-$("td.active:first").offset().top;i.each(function(){var t=$(this).find("td.active:first").attr("rowspan");t&&$(this).next().find("td.active").length<=0?n+=parseInt(t):n+=1}),n-=0,t.find("tr:first td:first").attr("width")||t.find("tr td").each(function(){var t=$(this);t.attr("width",t.width()).attr("height",t.height())});var l=t.find("td.active:first"),s=l.width(),d=parseInt(l.attr("colspan"))||1;d&&!Number.isNaN(d)&&(s/=d);var f=t.find("td.active .fieldItem:first");l.attr("rowspan",n).attr("colspan",e).removeClass("active"),t.find("td.active").remove(),0<f.length&&l.html("").append(f),s*=parseInt(e),l.attr("width",0==r&&s||r).attr("height",o)}},getTdPosi:function(t,e){for(var n="<tr>",a=0;a<t;a++)n+="<td></td>";n+="</tr>",e.prepend(n);var i=e.find("tr:first"),r=[];return i.find("td").each(function(t){var e=$(this);r.push({$td:e,X:e.offset().left,W:e.width()})}),i.remove(),r},insertTr:function(t){if(t){var e=t.closest(".tbLayout"),i=0,r=0;e.find("tr:first td").each(function(){var t=$(this).attr("colspan");i+=t?parseInt(t):1});var s=this.getTdPosi(i,e),d=[],o=0;if(t.find("td").each(function(t){var e=$(this).attr("colspan"),n=$(this).offset().left;if(e){r+=parseInt(e);for(var a=o;a<i;a++){if(n==s[a].X){o+=parseInt(e);break}o+=parseInt(e),d.push(a)}}else{r+=1;for(a=o;a<i;a++){if(n==s[a].X){o+=1;break}o+=1,d.push(a)}}}),o<s.length)for(var n=o;n<s.length;n++)d.push(n);var a=t.clone(!1,!1).find("td").html('<div class="tdNull"></div>').parent(),l=!1;if(1!=a.find("td").length&&a.find("td").each(function(){if($(this).attr("rowspan"))return!(l=!0)}),0<t.find("td").length)if(r!=i||l)t.find("td").each(function(t){var e=$(this).attr("rowspan");e&&1<parseInt(e)&&($(this).attr("rowspan",parseInt(e)+1),a.find("td").eq(t).addClass("removeTd"))}),a.find("td.removeTd").remove(),t.after(a);else{var f=t.find("td:first").attr("rowspan");if(f){f=parseInt(f)-1;for(var c=0;c<f;c++)t=t.next();t.after(a);for(var u=0;u<f;u++)a.after("<tr/>")}else t.after(a)}r!=i&&t.prevUntil().each(function(){if($(this).find("td").each(function(){var t=$(this),e=t.attr("rowspan");if(e&&1<parseInt(e)){var n=t.offset().left,a=0;$.each(s,function(t,e){if(e.X==n)return a=t,!1});for(var i=0,r=0;r<d.length;r++)if(a==d[r]){t.attr("rowspan",parseInt(e)+1),d.splice(r,1),i=r;break}var o=t.attr("colspan");if(o&&1<parseInt(o)){o=parseInt(o)-1;for(var l=0;l<o;l++)i+=1,d.splice(i,1)}}if(d.length<=0)return!1}),d.length<=0)return!1})}},insertToLast:function(t){var e=$("<tr/>"),n=0;t.find("table tr:first td").each(function(){var t=$(this).attr("colspan");n+=t?parseInt(t):1});for(var a=0;a<n;a++)e.append('<td><div class="tdNull"></div></td>');t.find("table").append(e)},deleteTr:function(t){if(t){var e=t.attr("rowspan"),n=[],a=t.parent();if(n.push(a),e&&1<e)for(var i=+e,r=1;r<i;r++)n.push(n[r-1].next());for(var o=n.length,l=0;l<o;l++)this.commDeleteTr(n[l]);return o}},commDeleteTr:function(r){$("#desiContent").css("overflow","hidden");var t=r.closest(".tbLayout"),i=0,o=0;t.find("tr:first td").each(function(){var t=$(this).attr("colspan");i+=t?parseInt(t):1});var s=this.getTdPosi(i,t),d=[],l=0;if(r.find("td").each(function(t){var e=$(this).attr("colspan"),n=$(this).offset().left;if(e){o+=parseInt(e);for(var a=l;a<i;a++){if(n==s[a].X){l+=parseInt(e);break}l+=parseInt(e),d.push(a)}}else{o+=1;for(a=l;a<i;a++){if(n==s[a].X){l+=1;break}l+=1,d.push(a)}}}),l<s.length)for(var e=l;e<s.length;e++)d.push(e);if(0<r.find("td").length&&r.find("td").each(function(t){var e=$(this),n=e.attr("rowspan");if(n&&1<parseInt(n)){var a=e.offset().left,i=e.clone();i.attr("rowspan",parseInt(n)-1),r.next().find("td").each(function(){var t=$(this).offset().left;if(a<t)return $(this).before(i),!1}),e.removeAttr("rowspan")}}),o==i)return r.remove(),void $("#desiContent").removeAttr("style");var f=[];r.prevUntil().each(function(){if($(this).find("td").each(function(){var t=$(this),e=t.attr("rowspan");if(e&&1<parseInt(e)){var n=t.offset().left,a=0;$.each(s,function(t,e){if(e.X==n)return a=t,!1});for(var i=0,r=0;r<d.length;r++)if(a==d[r]){f.push(t),d.splice(r,1),i=r;break}var o=t.attr("colspan");if(o&&1<parseInt(o)){o=parseInt(o)-1;for(var l=0;l<o;l++)i+=1,d.splice(i,1)}}if(d.length<=0)return!1}),d.length<=0)return!1}),$.each(f,function(t,e){e.attr("rowspan",parseInt(e.attr("rowspan"))-1)}),r.remove(),$("#desiContent").removeAttr("style")},insertTd:function(t){if(t){$("#desiContent").css("overflow","hidden");var e=t.closest(".tbLayout"),n=this.reDiffTdWidth(e),a=$("<td/>");n&&a.attr("width",n),a.append('<div class="default-ele">&nbsp;</div>');var o=$("<div/>").append(a).html();e.find("tr").each(function(){$(this).append(o)});var i=t.offset(),l=i.left,s=i.left+t.width(),d=0;e.find("tr").each(function(){var r=$(this);if(0<d)return r.find("td:last").remove(),d--,!0;r.find("td").each(function(){var t=$(this),e=t.offset();if(e.left<=l&&e.left+t.width()>=s){var n=t.attr("colspan");if(n&&1<n){var a=parseInt(n)+1,i=t.attr("rowspan");i&&1<i&&(d=parseInt(i)-1),t.attr("colspan",a)}else t.after(o);return r.find("td:last").remove(),!1}})}),$("#desiContent").removeAttr("style")}},reDiffTdWidth:function(t){var e=t.closest(".fieldItem");if(t.find("tr td:first").attr("width")){var n=0,a=e.width(),i=0;e.find("table tr:first td").each(function(){var t=$(this).attr("colspan");i+=$(this).width(),n+=t?parseInt(t):1});var r=Math.floor(a/(n+1));return e.find("table tr td").each(function(){var t=$(this),e=parseInt(t.attr("width"));e=1<(e-=e/i*r)&&e||1,e=Math.floor(e),t.attr("width",e)}),r}return!1},deleteTd:function(t){if(t&&!(t.closest("body").length<=0)){$("#desiContent").css("overflow","hidden");var n=t.closest(".tbLayout"),e=t.attr("colspan"),a=t.attr("rowspan"),i=[];if(e&&1<e||a&&1<a){this.splitCell(t);var r=parseInt(e);if(0<r)for(var o=0;o<r;o++)0<i.length?i.push(i[o-1].next()):i.push(t);else i.push(t)}else i.push(t);var l=0,s=this;$.each(i,function(){var t=this.offset(),i=t.left,e=this.width(),r=t.left+e,o=[];if(n.find("tr:first td").length<=1)return n.closest(".fieldItem").find(".btnDelField").click(),!1;n.find("tr").each(function(){$(this).find("td").each(function(){var t=$(this),e=t.offset();if(e.left<=i&&e.left+t.width()>=r){var n=t.attr("colspan");if(n&&1<n){var a=parseInt(n)-1;o.push({$el:t,type:"colspan",colSpan:a})}else o.push({$el:t,type:"remove"});return!1}})}),$.each(o,function(){if("remove"==this.type)s.CellAverage(this.$el),this.$el.remove();else{var t=this.$el.width()-e;this.$el.attr("colspan",this.colSpan).attr("width",t)}}),l++});var d=$("#controlAttrs .txtCol");d.val(parseInt(d.val())-l),$("#desiContent").removeAttr("style")}},CellAverage:function(t){var e=t.siblings(),n=t.width(),a=t.parent().width()-n;e.each(function(){var t=$(this),e=parseInt(t.attr("width"));e+=e/a*n,e=Math.floor(e),t.attr("width",e)})},splitCell:function(i){var t=i.closest(".tbLayout"),e=0,n=i.attr("colspan");t.find("tr:first td").each(function(){var t=$(this).attr("colspan");e+=t?parseInt(t):1});var a=this.getTdPosi(e,t),r=i.offset(),o=i.attr("rowspan"),l=0;$.each(a,function(t,e){if(e.X==r.left)return l=t,!1});var s="",d='<td width="'+a[l].W+'"><div class="tdNull">&nbsp;</div></td>',f=a[l].W;l++;for(var c=1;c<n;c++)s+='<td width="'+a[l].W+'"><div class="tdNull">&nbsp;</div></td>',l++;if(1<o){for(var u=i.parent(),p=[],h=1;h<o;h++)0<p.length?p.push(p[h-2].next()):p.push(u.next());p.reverse(),n==e?$.each(p,function(){var t=parseInt(i.attr("rowspan"))-1;this.append(d+s),i.attr("rowspan",t).removeAttr("height")}):$.each(p,function(){this.find("td").each(function(){var t=$(this),e=t.next().length,n=t.offset().left>r.left;if(n||e<=0){var a=parseInt(i.attr("rowspan"))-1;return n?t.before(d+s):t.after(d+s),i.attr("rowspan",a).removeAttr("height"),!1}})}),1<n&&(i.after(s),i.attr("width",f).attr("colspan",1))}else i.after(s),i.attr("width",f).attr("colspan",1)}};e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,i=n(2),r=(a=i)&&a.__esModule?a:{default:a};var o={init:function(e){var n=this;e.on("contextmenu",".tbLayout",function(t){return n.insertContextMeun(t,e),!1}),$("body").on("click.tbContentMeun",function(){$("#tbContextMenu").remove()})},insertContextMeun:function(t,e){$("#tbContextMenu").remove();var n=$('<div id="tbContextMenu" />');n.html(r.default.tb),n.find(".btnNorMal").addClass("ThemeBgCoolHover"),n.css({top:t.pageY,left:t.pageX}),$("body").append(n),this.initContextEvent(n,e)},initContextEvent:function(t,e){t.on("click",".btnHandleTable",function(){var t=$(this).attr("type");e.find(".designProps .optItem .btnHandleTable[type='"+t+"']").click()})}};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(16);var i={defaultData:function(){return{type:"TextInput",id:"TextInput_"+ +new Date,Settings:{placeHolderText:""},values:[]}},metaInfo:{type:"TextInput",name:"文本输入框",iconClass:"icon-wenbenshurukuang",attrs:{maxLen:200,minLen:!1,placeHolderText:!0}},methods:{render:function(t){t||(t=i.defaultData());var e=$('<div class="fieldItem" />'),n=$('<div class="txtInputBox" />'),a=$('<textarea rows="1" class="txtInput"/>');return t.Settings.placeHolderText&&a.attr("placeholder",t.Settings.placeHolderText),e.attr("id",t.id).attr("type",t.type),t.values[0]&&a.val(t.values[0]),t.Settings.style&&a.attr("style",t.Settings.style),n.append(a),e.append(n),e},parse:function(){}},render:function(t){return i.methods.render(t)}};e.default=i},function(t,e){},function(t,e){},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,i=n(20),r=(a=i)&&a.__esModule?a:{default:a};var o={init:function(t){r.default.init(t)}};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a(n(0)),s=a(n(3));function a(t){return t&&t.__esModule?t:{default:t}}var i={init:function(e){var n=this;e.on("mousedown",".ControlBox .cItem",function(t){n.bindDropEvent({$container:e,$el:$(this),elX:t.pageX,elY:t.pageY})})},bindDropEvent:function(i){var r=i.$el.clone(!1,!1),t=i.$el.offset(),o=i.elX-t.left,l=i.elY-t.top,s=this,d=r.attr("type");r.attr("id","dropEl"),$("body").append(r),$("body").addClass("noSelected"),$(window).on("mousemove.moveInput",function(t){var e=t.pageX,n=t.pageY,a={$container:i.$container,left:e-o,top:n-l,type:d};if(e!=i.elX||n!=i.elY)return r.css(a),s.diffInsertPos(a),!1}),$(window).on("mouseup.moveInput",function(){$(window).off("mousemove.moveInput"),$(window).off("mouseup.moveInput"),s.insertControl(d,i.$container),r.remove(),$("body").removeClass("noSelected")})},diffInsertPos:function(d){var t=d.$container.find(".fromDesign"),e=t.offset(),n=e.top,a=e.left,i=t.height(),r=t.width(),o=$("#dropEl").height(),f='<div class="fieldItem"  id="insetEl"/>';if(d.top+o>n&&d.top<n+i&&d.left>a&&d.left<a+r){var l=t.find(".fieldItem");if(l.length<=0)$("#insetEl").length<=0&&t.append(f);else{var c=!1;l.each(function(){if(0<$(this).closest("td").length&&"TextInput"!=$(this).attr("type"))return!0;var l=$(this),t=l.offset().top,e=l.height(),s=$("#insetEl");if(d.top<t&&d.top+o>t)return c=!0,s.length<=0?l.before(f):l.before(s),!1;if(d.top>t&&d.top<t+e){if(c=!0,"insetEl"==l.attr("id"))return!1;if(0<l.find("table").length&&"Table"!=d.type&&"DataTable"!=d.type){var n=l.prev();if(0<n.length){n.attr("type");"Table"&&(t+=10)}return o+d.top>t+e?s.length<=0?l.after(f):l.after(s):l.find("td").each(function(){var t=$(this),e=t.offset().left,n=t.offset().top,a=t.width(),i=t.height(),r=e<d.left&&e+a>d.left||e>d.left&&e<d.left+d.width;if(1<t.find(".fieldItem").length&&t.find(".fieldItem:first").nextAll().remove(),!r||0<t.find(".fieldItem").length&&"TextInput"!=t.find(".fieldItem").attr("type"))return!0;if(n<d.top&&n+i>d.top||n>d.top&&n<d.top+d.height){if("DataTable"==l.attr("type")&&0==t.parent().index()){var o=t.index();t=t.parent().next().find("td").eq(o)}return 0<t.find(".fieldItem").length&&t.find(".fieldItem.textInput").length<=0||(s.length<=0?t.prepend(f):t.prepend(s),!1)}}),!1}return d.top>t+e/2?s.length<=0?l.after(f):l.after(s):s.length<=0?l.before(f):l.before(s),!1}}),c||($("#insetEl").length<=0?t.append(f):t.find(".fieldItem:last").after($("#insetEl")))}}else $("#insetEl").remove()},insertControl:function(t,e){var n=$("#insetEl");if(0<n.length){if(!l.default.AllControls[t])return;var a=l.default.AllControls[t].render();if(n.closest("tr").length<=0)n.after(a);else{var i=n.closest("td"),r=i.closest("table");if(n.remove(),"Table"==t||"DataTable"==t)return void $dropEl.remove();if(1<=i.find(".fieldItem.textInput").length&&i.find(".fieldItem").remove(),0<i.find(".fieldItem").length)return void $dropEl.remove();i.attr("width")||r.find("tr td").each(function(){var t=$(this);t.attr("width",t.width()).attr("height",t.height())});var o=[];i.closest(".tbLayout").find("td").each(function(){var t=$(this);o.push({$el:t,w:t.width(),h:t.height()})}),$.each(o,function(t,e){e.$el.attr("width",e.w).attr("height",e.h)}),Comm.diffElementFixedW(a,i.width()),"DataTable"==i.closest(".fieldItem").attr("type")&&a.addClass("hideTitle"),i.append(a),i.find(".default-ele").remove()}n.remove(),$("#desiContent .fieldItem.selected").removeClass("selected"),a.addClass("selected"),s.default.render({type:t,$el:e})}}};e.default=i},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={title:'<div class="optItem"><input maxlength="50" type="text" class="txtTitle" /></div>',hideTitle:'<div class="optItem"><label class="attrLab"><input class="ckHideBox" type="checkbox"> 隐藏标题 </label></div>',placeHolder:'<div class="optItem"><input type="text" class="txtPlaceHolder"></div>',required:'<div class="optItem"><label class="attrLab"><input class="ckBox" type="checkbox"> 这个是必填项目 </label></div>',layout:'<div class="optItem"><label class="attrLab"><input name="setRowCol" checked="true" class="ckLayOut" key="row" type="radio"> 横向 </label><label class="attrLab"><input key="col" name="setRowCol" class="ckLayOut" type="radio"> 纵向 </label></div>'}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(24);var a={init:function(t){var e=$('<div class="desiContent"/>');e.append(this.reToDoHtml()),e.append('<div class="fromDesign"/>'),t.$el.append(e)},reToDoHtml:function(){return'<div class="reToDo"><span class="btnReDo empty"><i class="commoniconfont icon-chexiao"></i><span class="text">撤销</span></span> <span class="btnToDo empty"><i class="commoniconfont icon-huifu1"></i><span class="text">恢复</span></span></div>'}};e.default=a},function(t,e){}]);